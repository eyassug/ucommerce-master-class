@inherits umbraco.MacroEngines.DynamicNodeContext
@using UCommerce.Api


@{
	if (IsPost)
	{
		int shippingMethodId = Convert.ToInt32(Request.Form["shippingMethod"]);
		TransactionLibrary.CreateShipment(shippingMethodId, "Shipment", true);
		TransactionLibrary.ExecuteBasketPipeline();
		
		Response.Redirect("Payment");
	}

}	
@{
	var shippingCountry = TransactionLibrary.GetShippingInformation().Country;
	var shippingMethods = TransactionLibrary.GetShippingMethods(shippingCountry);
}


<form method="post">
@foreach (var shippingMethod in shippingMethods)
{
	<input type="radio" name="shippingMethod" value="@shippingMethod.ShippingMethodId"/>@shippingMethod.Name
		
		
}
	<input type="submit" name="Select payment method"/>
</form>